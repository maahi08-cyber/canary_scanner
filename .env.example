# Canary Scanner - Environment Configuration Template 
# ============================================================
# Copy this file to .env and fill in your actual values.
# NEVER commit the .env file with real secrets!

# --- General ---
LOG_LEVEL=INFO # Log level for all services (DEBUG, INFO, WARNING, ERROR)

# --- PostgreSQL Database (for Dashboard) ---
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_db_password # CHANGE THIS
POSTGRES_DB=canary_dashboard
POSTGRES_HOST=db # Service name in docker-compose
POSTGRES_PORT=5432
# Combined URL (used by Dashboard app)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# --- Redis (Optional - For Validation Service Queue) ---
# REDIS_HOST=redis
# REDIS_PORT=6379
# REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/0

# --- Dashboard Service ---
# Generate a strong secret key (e.g., `openssl rand -hex 32`)
DASHBOARD_SECRET_KEY=your_very_strong_random_secret_key_for_dashboard_sessions
DASHBOARD_BASE_URL=http://localhost:8000 # Public URL where dashboard is accessed
DASHBOARD_PORT=8000

# --- Validation Service ---
VALIDATION_SERVICE_URL=http://validation_service:8001 # Internal URL for scanner/dashboard
VALIDATION_SERVICE_PORT=8001
# Generate a strong random API key for inter-service communication
VALIDATION_API_KEY=your_strong_random_api_key_for_validation_service

# --- AWS Validator Credentials (Used by Validation Service) ---
# **SECURITY WARNING:** Use IAM Roles in production (e.g., ECS Task Role).
# These static keys are primarily for local development/testing with caution.
# Ensure these credentials have minimal (read-only) permissions (e.g., only sts:GetCallerIdentity).
VALIDATOR_AWS_ACCESS_KEY_ID=
VALIDATOR_AWS_SECRET_ACCESS_KEY=
VALIDATOR_AWS_REGION=us-east-1 # Or your preferred region

# --- GitHub Validator Credentials (Used by Validation Service) ---
# GitHub PAT with minimal scope (e.g., read:user) used by Validation Service
# VALIDATOR_GITHUB_TOKEN=ghp_... # Store securely

# --- GitHub App (Used by Dashboard for Real-time Scanning) ---
# Get these from your GitHub App's settings page
GITHUB_APP_ID=
# Paste the multi-line private key correctly, handling newlines (e.g., use quotes in docker-compose env)
GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\n...\n-----END RSA PRIVATE KEY-----"
GITHUB_APP_WEBHOOK_SECRET=your_github_app_webhook_secret

# --- Slack Alerts (Used by Dashboard) ---
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/T00.../.../... # Your Incoming Webhook URL
SLACK_CHANNEL=#security-alerts # Default channel
